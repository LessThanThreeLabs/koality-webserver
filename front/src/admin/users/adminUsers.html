<div id="adminUsers" ng-controller="AdminUsers">
	<panel-header>
		Users
		<button ng-click="toggleDrawer('addUsers')">Add New Users</button>
	</panel-header>

	<panel-body no-padding open-drawer="currentlyOpenDrawer">
		<panel-drawer drawer-name="addUsers">
			<form id="addUsersForm" name="addUsersForm" novalidate>
				<table>
					<tr>
						<td class="addUsersColumn">
							<label>Add Users</label>
							<input type="text" ng-model="addUsers.emails" name="emails" placeholder="first@email.com second@email.com third@email.com ..." focused required>
						</td>
						<td class="addUsersSubmitColumn">
							<busy-button busy="addUsers.makingRequest" click="submitUsers()" disabled="addUsersForm.$invalid">Invite Users</busy-button>
						</td>
						<td class="addUsersCancelColumn">
							<a ng-click="clearAddUsers()">Cancel</a>
						</td>
					</tr>
				</table>
			</form>
		</panel-drawer>

		<div id="usersList" fading-content>
			<table class="delineated">
				<tr>
					<th class="nameColumn unselectable" ng-click="orderByPredicate = 'lastName'; orderByReverse = !orderByReverse">
						<div class="triangle gray" ng-class="{right: orderByPredicate != 'lastName', up: orderByPredicate == 'lastName' && !orderByReverse, down: orderByPredicate == 'lastName' && orderByReverse}"></div>
						Name
					</th>
					<th class="emailColumn unselectable" ng-click="orderByPredicate = 'email'; orderByReverse = !orderByReverse">
						<div class="triangle gray" ng-class="{right: orderByPredicate != 'email', up: orderByPredicate == 'email' && !orderByReverse, down: orderByPredicate == 'email' && orderByReverse}"></div>
						Email
					</th>
					<th class="privilegesColumn unselectable" ng-click="orderByPredicate = 'privilege'; orderByReverse = !orderByReverse">
						<div class="triangle gray" ng-class="{right: orderByPredicate != 'privilege', up: orderByPredicate == 'privilege' && !orderByReverse, down: orderByPredicate == 'privilege' && orderByReverse}"></div>
						Privileges
					</th>
					<th class="editColumn unselectable">Actions</th>
				</tr>

				<tr ng-repeat="user in users | orderBy:orderByPredicate:orderByReverse" ng-class="{editing: user.id == currentlyEditingUserId}">
					<td class="nameColumn" text-selectable>
						{{user.firstName}} {{user.lastName}}
					</td>
					<td class="emailColumn" text-selectable>
						<a href="mailto:{{user.email}}?subject=Koality" target="_blank" ng-class="{disabled: user.id == currentlyEditingUserId}">{{user.email}}</a>
					</td>
					<td class="privilegesColumn" text-selectable>
						<span ng-show="user.id != currentlyEditingUserId">{{user.privilege}}</span>
						<select ng-model="user.newPrivilege" ng-show="user.id == currentlyEditingUserId">
							<option value="Admin">Admin</option>
							<option value="User">User</option>
						</select>
					</td>
					<td class="editColumn">
						<a ng-click="editUser(user)" ng-class="{disabled: user.id == userId}" ng-show="user.id != currentlyEditingUserId">Edit</a>
						<a ng-click="saveUser(user)" ng-show="user.id == currentlyEditingUserId">Save</a>
						<a class="red" ng-click="deleteUser(user)" ng-show="user.id == currentlyEditingUserId">Delete</a>
						<a class="gray" ng-click="editUser(null)" ng-show="user.id == currentlyEditingUserId">Cancel</a>
					</td>
				</tr>
			</table>
		</div>
	</panel-body>
</div>
