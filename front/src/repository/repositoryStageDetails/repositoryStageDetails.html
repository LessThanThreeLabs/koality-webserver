<div id="repositoryStageDetails" ng-controller="RepositoryStageDetails">
	<panel>
		<panel-header>
			<span ng-show="selectedStage.isSummary()">summary</span>
			<span ng-show="selectedStage.getInformation() != null">{{selectedStage.getInformation().name}}</span>
			<span ng-show="selectedStage.isSkipped()">skipped</span>
			<span ng-show="selectedStage.isMerge()">merge</span>
			<span ng-show="selectedStage.isDebug()">debug</span>
		</panel-header>

		<panel-body>
			<spinner id="loadingSpinner" spinner-running="spinnerOn"></spinner>

			<div id="summary" ng-show="selectedStage.isSummary() && selectedChange.getInformation() != null">
				<table>
					<tr>
						<th>Name</th>
						<td>{{selectedChange.getInformation().submitter.firstName}} {{selectedChange.getInformation().submitter.lastName}}</td>
					</tr>
					<tr>
						<th>Email</th>
						<td><a href="mailto:{{selectedChange.getInformation().submitter.email}}?subject=Koality%3A%20{{selectedRepository.getInformation().name}}%20-%20change%20%23{{selectedChange.getInformation().number}}&body=Link%20to%20change%3A%20{{currentUrl}}" target="_blank">{{selectedChange.getInformation().submitter.email}}</a></td>
					</tr>
					<tr>
						<th>Submit Time</th>
						<td>{{selectedChange.getInformation().createTime | date:'EEEE, MM/dd hh:mm:ss a'}}</td>
					</tr>
					<tr>
						<th>Branch</th>
						<td>{{selectedChange.getInformation().target}}</td>
					</tr>
					<tr>
						<th>Head SHA</th>
						<td>{{selectedChange.getInformation().headCommit.sha}}</td>
					</tr>
					<tr>
						<th>Head Commit</th>
						<td ng-bind-html="selectedChange.getInformation().headCommit.message | ascii"></td>
					</tr>
					<tr ng-show="exportUris.length > 0">
						<th>Exported Files</th>
						<td>
							<div ng-repeat="uri in exportUris"><a ng-href="{{uri}}" target="_blank">{{uri}}</a></div>
						</td>
					</tr>
				</table>
			</div>

			<div id="output" ng-show="selectedStage.getId() != null">
				<div class="consoleTextTopBuffer"></div>
				<div class="consoleTextContainer" auto-scroll-to-bottom="lines" auto-scroll-to-bottom-buffer="40" start-at-bottom>
					<console-text class="consoleText" console-text-lines="lines"></console-text>
				</div>
				<div class="consoleTextBottomBuffer"></div>
			</div>

			<div id="skipped" ng-show="selectedStage.isSkipped()">
				<div id="skippedMessage">
					This change was not verified because Koality is deactivated.
				</div>
				<div id="skippedInstructions">
					Contact your administrator to fix your license.
				</div>
			</div>

			<div id="merge" ng-show="selectedStage.isMerge()">
				<div ng-show="selectedChange.getInformation().mergeStatus == 'passed'">
					Change merged successfully.
				</div>
				<div ng-show="selectedChange.getInformation().mergeStatus == 'failed'">
					Failed to merge. Try pulling before pushing again.
				</div>
			</div>

			<div id="debug" ng-show="selectedStage.isDebug()">
				<div id="debugMessage">
					This change failed to create any output. This could be caused by invalid AWS credentials.
				</div>
				<div id="debugInstructions">
					Contact your administrator to correct the issue.
				</div>
			</div>
		</panel-body>
	</panel>
</div>